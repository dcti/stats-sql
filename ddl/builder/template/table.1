-- $Id: table.1,v 1.4 2000/03/17 04:32:14 decibel Exp $

\set table=@TABLENAME@
\set database=@DATABASENAME@

create table #abort (abort tinyint)
go

if db_id("$database") is NULL
begin
	print "The database '%1!' does not exist!", $database
	insert into #abort values ('1')
end
go

use $database
go

if NOT exists (select * from #abort)
begin
	if object_id("$table") is not NULL
	exec "if NOT exists (select * from $table) drop table $table"
end
go

if NOT exists (select * from #abort)
begin
	if object_id("$table") is not NULL
		begin
			print "Table not dropped - data exists or other error"
			insert into #abort values ('1')
		end
	end
end
go

if NOT exists (select * from #abort)
begin
print 'Creating table %1!', $table

