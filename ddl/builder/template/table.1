-- $Id: table.1,v 1.5 2000/03/27 05:24:19 decibel Exp $

\set table=@TABLENAME@
\set database=@DATABASENAME@

create table #abort (abort tinyint)
go

if db_id("$database") is NULL
begin
	print "The database '%1!' does not exist!", $database
	insert into #abort values (1)
end
go

use $database
go

if NOT exists (select * from #abort)
begin
	if object_id("$table") is not NULL
	begin
		print "Table already exists; aborting."
		insert into #abort values (1)
	end
end
go

if NOT exists (select * from #abort)
begin
print 'Creating table %1!', $table

