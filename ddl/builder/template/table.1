-- $Id: table.1,v 1.3 2000/02/26 23:22:48 decibel Exp $

\set table=@TABLENAME@
\set database=@DATABASENAME@

create table #abort (abort tinyint)
go

if db_id("$database") is NULL
begin
	print "The database '%1!' does not exist!", $database
	insert #abort select 1
end
go

use $database
go

if NOT exists (select * from #abort)
begin
	if object_id("$table") is not NULL
	exec "if NOT exists (select * from $table) drop table $table"
end
go

if NOT exists (select * from #abort)
begin
	if object_id("$table") is not NULL
		begin
			print "Table not dropped - data exists or other error"
			insert #abort select 1
		end
	end
end
go

if NOT exists (select * from #abort)
begin
print 'Creating table %1!', $table

