-- $Id: participant.def,v 1.3 2000/03/17 04:55:58 decibel Exp $

\set procedure=p_participant_all

if ( "${1}" = "" )
begin
	print "Database not specified! Using 'stats' as default!"
	use stats
end
else
begin
	use ${1}
end
go

if (object_id("$procedure") is not null)
begin
        print "Dropping procedure $procedure"
        drop procedure $procedure
end
go

\echo "Creating procedure $procedure"
create procedure $procedure
(	@id numeric(7,0) = 0		/* Participant ID to look up */
)
as
	/* Error check */
	if @id = 0
	begin
		raiserror 99999 "participant ID not specified"
		return -5
	end

	select * from STATS_Participant where id = @id and listmode < 10
	return

go

grant execute on p_participant_all to public
go

